# Task Hub - ä»»åŠ¡ç®¡ç†å¹³å°

<p align="center">
  <img src="https://nestjs.com/img/logo-small.svg" width="120" alt="NestJS Logo" />
</p>

<p align="center">
  <strong>åŸºäº NestJS æ„å»ºçš„ä»»åŠ¡ç®¡ç†å’Œè°ƒåº¦å¹³å°</strong>
</p>

<p align="center">
  <a href="#"><img src="https://img.shields.io/badge/Node.js->=18.0.0-green.svg" alt="Node Version" /></a>
  <a href="#"><img src="https://img.shields.io/badge/TypeScript-5.7.3-blue.svg" alt="TypeScript Version" /></a>
  <a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License" /></a>
  <a href="#"><img src="https://img.shields.io/badge/PRs-Welcome-brightgreen.svg" alt="PRs Welcome" /></a>
</p>

---

## ğŸ“– é¡¹ç›®ä»‹ç»

Task Hub æ˜¯ä¸€ä¸ªåŸºäº NestJS å¼€å‘çš„ä»»åŠ¡ç®¡ç†å’Œè°ƒåº¦å¹³å°ï¼Œé›†æˆäº†é£ä¹¦APIã€å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºå›¢é˜Ÿåä½œå’Œä»»åŠ¡ç®¡ç†åœºæ™¯ã€‚

### ğŸ¯ è®¾è®¡ç›®æ ‡

- **ç®€æ´å®ç”¨**: ç›´è§‚çš„åŠŸèƒ½è®¾è®¡ï¼Œæ»¡è¶³æ—¥å¸¸ä»»åŠ¡ç®¡ç†éœ€æ±‚
- **ç¨³å®šå¯é **: åŸºäºæˆç†Ÿçš„æŠ€æœ¯æ ˆï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ
- **æ˜“äºéƒ¨ç½²**: æ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²
- **å¼€æºå‹å¥½**: å®Œå…¨å¼€æºï¼Œæ–¹ä¾¿äºŒæ¬¡å¼€å‘å’Œå®šåˆ¶

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸš€ ä»»åŠ¡ç®¡ç†
- **å®šæ—¶ä»»åŠ¡**: æ”¯æŒ Cron è¡¨è¾¾å¼çš„å®šæ—¶ä»»åŠ¡è°ƒåº¦
- **ä»»åŠ¡ç›‘æ§**: ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€è·Ÿè¸ªå’Œæ—¥å¿—è®°å½•
- **æ‰‹åŠ¨æ‰§è¡Œ**: æ”¯æŒæ‰‹åŠ¨è§¦å‘ä»»åŠ¡æ‰§è¡Œ
- **ä»»åŠ¡æ¨¡æ¿**: é¢„å®šä¹‰ä»»åŠ¡æ¨¡æ¿ï¼Œå¿«é€Ÿåˆ›å»ºä»»åŠ¡

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **ç”¨æˆ·è®¤è¯**: åŸºæœ¬çš„ç”¨æˆ·ç™»å½•å’Œè®¤è¯åŠŸèƒ½
- **ç”¨æˆ·ä¿¡æ¯**: ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ç®¡ç†
- **æ“ä½œè®°å½•**: ç”¨æˆ·æ“ä½œå†å²è®°å½•

### ğŸ”” é£ä¹¦é›†æˆ
- **æ¶ˆæ¯æ¨é€**: ä»»åŠ¡çŠ¶æ€å˜åŒ–è‡ªåŠ¨æ¨é€åˆ°é£ä¹¦
- **ç¾¤æœºå™¨äºº**: æ”¯æŒé£ä¹¦ç¾¤æœºå™¨äººåŠŸèƒ½
- **åŸºç¡€API**: é›†æˆé£ä¹¦åŸºç¡€APIåŠŸèƒ½

### ğŸ“‹ å€¼ç­ç®¡ç†
- **å€¼ç­å®‰æ’**: åˆ›å»ºå’Œç®¡ç†å€¼ç­è®¡åˆ’
- **å€¼ç­æé†’**: è‡ªåŠ¨å€¼ç­æé†’åŠŸèƒ½
- **å€¼ç­è®°å½•**: å€¼ç­å†å²è®°å½•æŸ¥è¯¢

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯
- **æ¡†æ¶**: NestJS 11.x - Node.js åº”ç”¨æ¡†æ¶
- **è¯­è¨€**: TypeScript 5.7 - ç±»å‹å®‰å…¨çš„ JavaScript
- **æ•°æ®åº“**: MySQL - å…³ç³»å‹æ•°æ®åº“
- **ORM**: Drizzle ORM - TypeScript ORM å·¥å…·

### å¼€å‘å·¥å…·
- **ä»£ç è´¨é‡**: ESLint + Prettier
- **æ•°æ®éªŒè¯**: class-validator + class-transformer
- **é…ç½®ç®¡ç†**: @nestjs/config
- **ä»»åŠ¡è°ƒåº¦**: @nestjs/schedule + cron
- **HTTP è¯·æ±‚**: @nestjs/axios
- **å®¹å™¨åŒ–**: Docker

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- bun >= 1.0.0
- MySQL >= 8.0

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/task-hub.git
cd task-hub
```

#### 2. å®‰è£…ä¾èµ–
```bash
bun install
```

#### 3. ç¯å¢ƒé…ç½®
å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ï¼š
```env
DATABASE_URL=mysql://username:password@localhost:3306/database_name
```

#### 4. æ•°æ®åº“åˆå§‹åŒ–
```bash
# ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶
bun run drizzle-kit generate

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
bun run drizzle-kit migrate
```

#### 5. å¯åŠ¨åº”ç”¨

**å¼€å‘æ¨¡å¼**
```bash
bun run start:dev
```

**ç”Ÿäº§æ¨¡å¼**
```bash
# æ„å»ºé¡¹ç›®
bun run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
bun run start:prod
```

åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### Docker éƒ¨ç½²

#### ä½¿ç”¨ Docker å¿«é€Ÿéƒ¨ç½²

1. **æ„å»ºé•œåƒ**
```bash
docker build -t task-hub .
```

2. **è¿è¡Œå®¹å™¨**
```bash
docker run -d \
  --name task-hub \
  -p 3000:3000 \
  -e DATABASE_URL="mysql://username:password@host:3306/database" \
  task-hub
```

#### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

åˆ›å»º `docker-compose.yml` æ–‡ä»¶ï¼š
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=mysql://root:password@db:3306/task_hub
    depends_on:
      - db
    restart: unless-stopped

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: task_hub
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
    restart: unless-stopped

volumes:
  mysql_data:
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
docker-compose up -d
```

### å¼€å‘æŒ‡å—

#### å¯ç”¨è„šæœ¬

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
bun run start:dev

# è°ƒè¯•æ¨¡å¼å¯åŠ¨
bun run start:debug

# ä»£ç æ ¼å¼åŒ–
bun run format

# ä»£ç æ£€æŸ¥
bun run lint

# è¿è¡Œæµ‹è¯•
bun run test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
bun run test:cov

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
bun run test:e2e
```

#### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ app.module.ts          # åº”ç”¨ä¸»æ¨¡å—
â”œâ”€â”€ main.ts               # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ common/               # å…¬å…±æ¨¡å—
â”œâ”€â”€ drizzle/              # æ•°æ®åº“é…ç½®
â”œâ”€â”€ duties/               # å€¼ç­ç®¡ç†æ¨¡å—
â”œâ”€â”€ feishu/               # é£ä¹¦é›†æˆæ¨¡å—
â”œâ”€â”€ tasks/                # ä»»åŠ¡ç®¡ç†æ¨¡å—
â”œâ”€â”€ template/             # æ¨¡æ¿ç®¡ç†æ¨¡å—
â”œâ”€â”€ thrift/               # Thrift æœåŠ¡æ¨¡å—
â”œâ”€â”€ users/                # ç”¨æˆ·ç®¡ç†æ¨¡å—
â””â”€â”€ utils.ts              # å·¥å…·å‡½æ•°
```

### å¸¸è§é—®é¢˜

#### Q: æ•°æ®åº“è¿æ¥å¤±è´¥
A: è¯·æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ MySQL æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

#### Q: ç«¯å£è¢«å ç”¨
A: å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ `PORT` ä¿®æ”¹åº”ç”¨ç«¯å£ï¼š
```bash
PORT=3001 bun run start:dev
```

#### Q: bun å‘½ä»¤ä¸å­˜åœ¨
A: è¯·å…ˆå®‰è£… bunï¼š
```bash
curl -fsSL https://bun.sh/install | bash
```